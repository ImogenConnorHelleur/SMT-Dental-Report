---
title: "Dental Data Pack"
subtitle: "`r params$region`"
date: "`r paste(format(Sys.time(), '%B, %Y'), ' - Reporting up to end of', format(Sys.Date() - lubridate::weeks(4), '%B, %Y'))`"
output:
  xaringan::moon_reader:
    css: [theme.css, nhsr-fonts.css]
    self_contained: true
    lib_dir: libs
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
params:
  region: "London"
---


```{r setup, include=FALSE}

library(tidyverse)
library(readxl)
library(DBI)
library(odbc)
library(reactable) #make sure you have the latest version by doing install.packages("reactable")
library(downloadthis)
library(lubridate)

#source in all file from plot folder
for (f in list.files(path = "../R/03 plot_functions/", pattern="*.R$")) {
    source(paste0("../R/03 plot_functions/", f))
}

for (f in list.files(path = "../R/02 format_data_functions/", pattern="*.R$")) {
    source(paste0("../R/02 format_data_functions/", f))
}


#pull data from NCDR
UDA_calendar_data <- pull_UDA_calendar_data()
UOA_calendar_data <- pull_UOA_calendar_data()
UDA_scheduled_data <- pull_UDA_scheduled_data()
UOA_scheduled_data <- pull_UOA_scheduled_data()
payments_to_dentists <- pull_payments_to_dentist()

historical_UDA_scheduled_data <- pull_UDA_scheduled_historical_data()
historical_UDA_scheduled_data <- rename(historical_UDA_scheduled_data, month = data_month)

historical_UOA_scheduled_data <- pull_UOA_scheduled_historical_data()
historical_UOA_scheduled_data <- rename(historical_UOA_scheduled_data, month = data_month)

#change column names and add regions
UDA_calendar_data <- rename(UDA_calendar_data, month = data_month)
UOA_calendar_data <- UOA_calendar_data %>%
  rename(month = data_month) %>%
  mutate(contract_number = as.numeric(contract_number),
         UOA_total = as.numeric(UOA_total)) 

    
# UOA_calendar_data <- left_join( region_STP_lookup, by = c("contract_number", "name_or_company_name", "commissioner_name"))
UDA_scheduled_data <- rename(UDA_scheduled_data, month = data_month)
UOA_scheduled_data <- rename(UOA_scheduled_data, month = data_month)

UDA_scheduled_data <- mutate(UDA_scheduled_data, month = as.Date(month))
UOA_scheduled_data <- mutate(UOA_scheduled_data, month = as.Date(month))

#sort out STP ICB changes
STP_ICB_lookup_codes <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/STP_ICB_lookup_codes.xlsx")

#Read local 111 file
dental_data_111 <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/111_pathways_data/dental_data_111.xlsx")

#############still to fix
prototype_contracts <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/prototype_contracts.xlsx")
contractor_categories <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/contractor_categories_Jan23.xlsx")
contractor_categories <- contractor_categories %>%
  mutate(contract_number = as.numeric(contract_number))
contract_demographics <- readRDS("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/contract_demographics.rds")

#read in unique patients
#unique_patients_rolling <- readRDS("../data/unique_patients/unique_patients_rolling.rds")
unique_patients_rolling <- pull_unique_patients_data()

#read in recalls 
dental_recalls_STP_2018_22 <- readRDS("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/dental_recalls_STP_2018_22.rds")

#read in CDS data
CDS_data <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/CDS/CDS_data.xlsx")
CDS_data <- clean_CDS_data_colnames(CDS_data)

#read in hand backs data
contract_handbacks <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/contract_handbacks.xlsx")

#read in and clean complaints data
Dental_Access_Complaints_Data_June_22 <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/complaints/Dental Access Complaints Data June 22.xlsx")
dental_complaints <- clean_complaints_data(Dental_Access_Complaints_Data_June_22)

#UDA value data
UDA_values <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/UDA_values.xlsx")
UDA_UOA_value_data <- pull_UDA_UOA_value()

#Pull patient charge data
patient_exemption_data <- pull_patient_exemption_data()
patient_exemption_data <- clean_patient_exemption_data()

#pull health inequalities data
health_inequalities_data <- pull_health_inequalities()

missing_contracts_data <- read_excel("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/data_for_monthly_report/missing_contract_details.xlsx")

#DCP_data <- read.csv("N:/_Everyone/Primary Care Group/SMT_Dental DENT 2022_23-008/DCP_data/DPC_v1_Oct_2022.csv") 
DCP_data <- pull_dcp_data()

BPE_data <- pull_BPE_data()

band2_split_data <- pull_band2_split_data()

new_vs_return_data <- pull_new_vs_returning_patients()

knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)

#avoid standard form
options(scipen=999)

# Suppress summarise info
options(dplyr.summarise.inform = FALSE)



#get STPs for each region
if(params$region == "South West"){
  
  region <- "South West"
  
  STP1 <- "Bristol, North Somerset and South Gloucestershire ICB"
  STP2 <- "Dorset ICB"
  STP3 <- "Bath and North East Somerset, Swindon And Wiltshire ICB"
  STP4 <- "Somerset ICB"
  STP5 <- "Devon ICB"
  STP6 <- "Cornwall and the Isles Of Scilly ICB"
  STP7 <- "Gloucestershire ICB"
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6, STP7)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- TRUE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "South East"){
  
  region <- "South East"
  
  STP1 <- "Sussex ICB"
  STP2 <- "Buckinghamshire, Oxfordshire and Berkshire West ICB"
  STP3 <- "Surrey Heartlands ICB"
  STP4 <- "Kent And Medway ICB"
  STP5 <- "Hampshire and Isle Of Wight ICB"
  STP6 <- "Frimley ICB"
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "North West"){
  
  region <- "North West"
  
  STP1 <- "Greater Manchester ICB"
  STP2 <- "Cheshire and Merseyside ICB"
  STP3 <- "Lancashire and South Cumbria ICB"
  STP4 <- NULL
  STP5 <- NULL
  STP6 <- NULL
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3)
  
  eval4 <- FALSE
  eval5 <- FALSE
  eval6 <- FALSE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "North East and Yorkshire"){
  
  region <- "North East and Yorkshire"
  
  STP1 <- "Humber and North Yorkshire ICB"
  STP2 <- "South Yorkshire ICB"
  STP3 <- "North East and North Cumbria ICB"
  STP4 <- "West Yorkshire ICB"
  STP5 <- NULL
  STP6 <- NULL
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4)
  
  eval4 <- TRUE
  eval5 <- FALSE
  eval6 <- FALSE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "London"){
  
  region <- "London"
  
  STP1 <- "North Central London ICB"
  STP2 <- "South East London ICB"
  STP3 <- "North East London ICB"
  STP4 <- "South West London ICB"
  STP5 <- "North West London ICB"
  STP6 <- NULL
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- FALSE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}else if(params$region == "Midlands"){
  
  region <- "Midlands"
  
  STP1 <- "Leicester, Leicestershire and Rutland ICB"
  STP2 <- "Herefordshire and Worcestershire ICB"
  STP3 <- "Nottingham and Nottinghamshire ICB"
  STP4 <- "Black Country ICB"
  STP5 <- "Staffordshire and Stoke-on-Trent ICB"
  STP6 <- "Northamptonshire ICB"
  STP7 <- "Shropshire, Telford and Wrekin ICB"
  STP8 <- "Lincolnshire ICB"
  STP9 <- "Birmingham and Solihull ICB"
  STP10 <- "Coventry and Warwickshire ICB"
  STP11 <- "Derby and Derbyshire ICB"
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6, STP7, STP8, STP9, STP10, STP11)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- TRUE
  eval8 <- TRUE
  eval9 <- TRUE
  eval10 <- TRUE
  eval11 <- TRUE
  
}else if(params$region == "East of England"){
  
  region <- "East of England"
  
  STP1 <- "Hertfordshire and West Essex ICB"
  STP2 <- "Mid and South Essex ICB"
  STP3 <- "Norfolk and Waveney ICB"
  STP4 <- "Cambridgeshire and Peterborough ICB"
  STP5 <- "Bedfordshire, Luton and Milton Keynes ICB"
  STP6 <- "Suffolk and North East Essex ICB"
  STP7 <- NULL
  STP8 <- NULL
  STP9 <- NULL
  STP10 <- NULL
  STP11 <- NULL
  
  STPs <- c(STP1, STP2, STP3, STP4, STP5, STP6)
  
  eval4 <- TRUE
  eval5 <- TRUE
  eval6 <- TRUE
  eval7 <- FALSE
  eval8 <- FALSE
  eval9 <- FALSE
  eval10 <- FALSE
  eval11 <- FALSE
  
}

```


name: contents
### Contents  

 <font size="1">

#### Dental
 * [Table of number of contracts by MY category](#contracts-table)
 * [UDA activity](#short-uda-activity)
 * [UDA activity by MY category](#short-uda-activity-my-cat)
 * [Cumulative UDA delivery per quarter](#cumulative-udas)
 * [YTD UDA delivery](#YTD-udas)
 * [Historical UDA delivery](#historic-udas)
 * [UDA delivery profile across months](#uda-delivery-profile)
 * [Banded courses of treatment time series](#banded-cots)
 * [Banded courses of treatment time series as % of 2019 delivery](#banded-cots-index)
 * [Percentage of FP17s in each band 2 sub-category](#band2-split-FP17-perc)
 * [Percentage of CoTs assisted by Dental Care Practitioners (DCPs)](#dcp-fp17)
 * [Percentage of UDAs assisted by Dental Care Practitioners (DCPs) by band](#dcp-uda)
 * [Percentage of FP17s indicating low oral health risk](#bpe)
 * [Unique patients seen rolling 12 months](#unique-patients)
 * [Unique patients seen rolling 12 months as % of April 2018 delivery](#unique-patients-index)
 * [Number of new patients](#new-patients)
 * [Percentage of practices seeing new patients](#new-patients-perc)
 * [Patient re-attendance intervals](#reattendance)
 * [Total payments to dentists by financial year](#payemts)
 * [Financial value of UDAs delivered](#uda-value)
 * [Financial value of UDAs delivered as % of 2018 delivery](#uda-value-index)
]

#### Orthodontic 
 * [UOA activity](#uoa-activity)
 * [UOA activity by MY category](#uoa-activity-my-cat)
 * [Cumulative UOA delivery per quarter](#cumulative-uoas)
 * [YTD UOA delivery](#YTD-uoas)
 * [UOA delivery profile across months](#uoa-delivery-profile)
 
#### Appendix
 * [MY Category classification breakdown](#my-cat-breakdown)
 * [Data sources](#data-sources)
 ]

<font size="1">
#### NOTE 
This is an interactive markdown report.  You can navigate from slide to slide by either clicking the mouse on the screen or by using the cursor keys.  **Press ? for help.** Some pages have selection buttons across regions, click on the region in order to explore the data for that area.  

---

### Calendar and scheduled data

All analyses in this report now only use **scheduled data**.

<font size="2">
#### Calendar data explanation
* Calendar data is based on courses of treatment completed within an entire month, for example 1st February to 28th Feb
* For calendar data, if a COT was completed in February but not declared till March, that activity would still be registered as
occurring in February.
* This means that graphs using calendar data may change for historical months as more COTs are registered.
* The activity % is now based on total number of UDA/UOAs delivered as a % of total contracted UDA/UOAs per quarter.


#### Scheduled data explanation
* The scheduling time period is usually between the 20th of one month and the 20th of the next month i.e., 21st April to the
19th May. That means that any Mandatory contract COT completed after this period will not be included in the May
scheduled data. However, if for example a COT was completed on May 1st, but reported to the BSA after the end of the
reporting period (April 21st – May 19th), that activity would go into the following scheduled period. As a result, the
scheduling period can be considered fixed.
* N.B. Scheduled data for April is from 1st April - 21st April. This has been taken into account when scaling up to annual delivery.

---
name: contracts-table

```{css, echo=F}
    /* Table width = 100% max-width */

    .remark-slide table{
        width: 100%;
    }

    /* Change the background color to white for shaded rows (even rows) */

    .remark-slide thead, .remark-slide tr:nth-child(2n) {
        background-color: white;
    }
```

### Number of contracts by Mid-Year (MY) category
(see appendix for category descriptions)

```{r xaringan-panelset-contracts, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r params$region`]

#### Including contracts with annual contracted UDA < 100
```{r table11, echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "Regional", region_STP_name = region), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r table21, echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "Regional", region_STP_name = region), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```


]
.panel[.panel-name[`r STP1`]

#### Including contracts with annual contracted UDA < 100
```{r table12, echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP1), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r table22, echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP1), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```



]
.panel[.panel-name[`r STP2`]

#### Including contracts with annual contracted UDA < 100
```{r table13, echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP2), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r table23, echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP2), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```



]
.panel[.panel-name[`r STP3`]

#### Including contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP3), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP3), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```



]
.panel[.panel-name[`r STP4`]

#### Including contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = eval4}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP4), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = eval4}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP4), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```



]
.panel[.panel-name[`r STP5`]

#### Including contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = eval5}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP5), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = eval5}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP5), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```



]
.panel[.panel-name[`r STP6`]

#### Including contracts with annual contracted UDA < 100
```{r  echo = FALSE, warning = FALSE, message = FALSE, eval = eval6}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP6), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = eval6}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP6), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```



]
.panel[.panel-name[`r STP7`]

#### Including contracts with annual contracted UDA < 100
```{r  echo = FALSE, warning = FALSE, message = FALSE, eval = eval7}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP7), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = eval7}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP7), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

]
.panel[.panel-name[`r STP8`]

#### Including contracts with annual contracted UDA < 100
```{r  echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval8}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP8), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval8}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP8), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

]
.panel[.panel-name[`r STP9`]

#### Including contracts with annual contracted UDA < 100
```{r  echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval9}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP9), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval9}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP9), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

]
.panel[.panel-name[`r STP10`]

#### Including contracts with annual contracted UDA < 100
```{r  echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval10}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP10), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval10}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP10), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

]
.panel[.panel-name[`r STP11`]

#### Including contracts with annual contracted UDA < 100
```{r  echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval11}
knitr::kable(table_number_cat_contracts(remove_prototypes = F, level = "STP", region_STP_name = STP11), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

#### Excluding contracts with annual contracted UDA < 100
```{r echo = FALSE, warning = FALSE, message = FALSE, eval = FALSE, eval = eval11}
knitr::kable(table_number_cat_contracts(remove_prototypes = T, level = "STP", region_STP_name = STP11), format = 'html') %>%
  kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

]
]

[Return to contents](#contents)

---

name: short-uda-activity

### UDA Activity Data

```{r xaringan-panelset-UDA-activity, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r region`]
```{r UDA_activity_Calendar1, echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "Regional",
                                  region_STP_name = region)
```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "Regional", region_STP_name = region)`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP1)
```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "STP", region_STP_name = STP1)`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP2)
```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "STP", region_STP_name = STP2)`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP3)
```

* This graph shows the average monthly performance of the **`r get_num_contracts(level = "STP", region_STP_name = STP3)`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval4}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP4)
```

* This graph shows the average monthly performance of the **`r if(eval4){get_num_contracts(level = "STP", region_STP_name = STP4)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval5}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP5)
```

* This graph shows the average monthly performance of the **`r if(eval5){get_num_contracts(level = "STP", region_STP_name = STP5)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval6}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP6)
```

* This graph shows the average monthly performance of the **`r if(eval6){get_num_contracts(level = "STP", region_STP_name = STP6)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval7}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP7)
```

* This graph shows the average monthly performance of the **`r if(eval7){get_num_contracts(level = "STP", region_STP_name = STP7)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval8}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP8)
```

* This graph shows the average monthly performance of the **`r if(eval8){get_num_contracts(level = "STP", region_STP_name = STP8)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval9}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP9)
```

* This graph shows the average monthly performance of the **`r if(eval9){get_num_contracts(level = "STP", region_STP_name = STP9)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval10}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP10)
```

* This graph shows the average monthly performance of the **`r if(eval10){get_num_contracts(level = "STP", region_STP_name = STP10)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval = eval11}
plot_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP11)
```

* This graph shows the average monthly performance of the **`r if(eval11){get_num_contracts(level = "STP", region_STP_name = STP11)}`** GDS/PDS/PDS+ contracts scaled up by 12 months measured against the delivery thresholds (60% for Apr-Sep 21, 65% for Oct-Dec, 85% for Jan-Mar and 95% for Apr-Jun 22).

]
]

[Return to contents](#contents)

---

name: short-uda-activity-my-cat

### UDA activity data by MY Category
#### Prototypes and contracts with annual contracted UDAs < 100 included

```{r xaringan-panelset-UDA-activity-My-CAT, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "Regional",
                                  region_STP_name = region,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP1,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP2,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP3,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP4,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP5,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP6,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP7,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP8,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP9,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP10,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_UDA_UOA_delivery_MY_cat(
                             data = UDA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP11,
                                  remove_prototypes = F,
                                  regional_lines = F,
                                  STP_lines = F,
                                  cat_lines = T,
                                  plotChart = T)
```

]

]

[Return to contents](#contents)


---

name: cumulative-udas

### UDA cumulative activity data

```{r xaringan-panelset-UDA_cumulative_activity, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "Regional",
                                  region_STP_name = region)
```

* This graph shows the cumulative activity by quarter of the
**`r get_num_contracts(level = "Regional", region_STP_name = region)`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(level = "Regional", region_STP_name = region)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(level = "Regional", region_STP_name = region)*100/get_num_contracts(level = "Regional", region_STP_name = region))` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.

]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP1)
```

* This graph shows the cumulative activity by quarter of the
**`r get_num_contracts(level = "STP", region_STP_name = STP1)`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP1)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP1)*100/get_num_contracts(level = "STP", region_STP_name = STP1))` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP2)
```

* This graph shows the cumulative activity by quarter of the
**`r get_num_contracts(level = "STP", region_STP_name = STP2)`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP2)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP2)*100/get_num_contracts(level = "STP", region_STP_name = STP2))` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP3)
```

* This graph shows the cumulative activity by quarter of the
**`r get_num_contracts(level = "STP", region_STP_name = STP3)`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP3)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP3)*100/get_num_contracts(level = "STP", region_STP_name = STP3))` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP4)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval4){get_num_contracts(level = "STP", region_STP_name = STP4)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval4){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP4)}`**
contracts (
**`r if(eval4){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP4)*100/get_num_contracts(level = "STP", region_STP_name = STP4))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP5)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval5){get_num_contracts(level = "STP", region_STP_name = STP5)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval5){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP5)}`**
contracts (
**`r if(eval5){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP5)*100/get_num_contracts(level = "STP", region_STP_name = STP5))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP6)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval6){get_num_contracts(level = "STP", region_STP_name = STP6)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval6){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP6)}`**
contracts (
**`r if(eval6){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP6)*100/get_num_contracts(level = "STP", region_STP_name = STP6))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP7)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval7){get_num_contracts(level = "STP", region_STP_name = STP7)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval7){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP7)}`**
contracts (
**`r if(eval7){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP7)*100/get_num_contracts(level = "STP", region_STP_name = STP7))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP8)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval8){get_num_contracts(level = "STP", region_STP_name = STP8)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval8){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP8)}`**
contracts (
**`r if(eval8){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP8)*100/get_num_contracts(level = "STP", region_STP_name = STP8))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP9)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval9){get_num_contracts(level = "STP", region_STP_name = STP9)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval9){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP9)}`**
contracts (
**`r if(eval9){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP9)*100/get_num_contracts(level = "STP", region_STP_name = STP9))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP10)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval10){get_num_contracts(level = "STP", region_STP_name = STP10)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval10){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP10)}`**
contracts (
**`r if(eval10){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP10)*100/get_num_contracts(level = "STP", region_STP_name = STP10))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_cumulative_UDA_UOA_to_target(data = UDA_scheduled_data,
                                  
                                  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP11)
```

* This graph shows the cumulative activity by quarter of the
**`r if(eval11){get_num_contracts(level = "STP", region_STP_name = STP11)}`**
GDS/PDS/PDS+
contracts measured against the expected monthly total activity to achieve the quarterly thresholds (100% for Jan-Mar 23).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval11){get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP11)}`**
contracts (
**`r if(eval11){round(get_quarterly_num_contracts_on_target(level = "STP", region_STP_name = STP11)*100/get_num_contracts(level = "STP", region_STP_name = STP11))}` %**
) have delivered the required UDAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


]
]

[Return to contents](#contents)

---

name: YTD-udas

### YTD UDA delivery

```{r xaringan-panelset-UDA-activity_YTD, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="2">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  level = "Regional",
                                  region_STP_name = region,
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP1)
```


]
.panel[.panel-name[`r STP2``]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP2)
```


]
.panel[.panel-name[`r STP3`]
```{r  echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP3)
```


]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval4}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP4)
```


]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval5}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP5)
```


]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval6}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP6)
```


]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval7}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP7)
```


]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval8}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP8)
```


]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval9}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP9)
```


]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval10}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP10)
```


]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval11}
plot_YTD_UDA_UOA_delivery(data = UDA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UDA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP11)
```


]
]

[Return to contents](#contents)

---

name: historic-udas

### Scheduled UDAs

```{r xaringan-panelset-UDA_activity_scheduled, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "Regional",
                                  region_STP_name = region)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.

]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP1)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP2)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP3)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP4)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP5)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP6)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP7)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP8)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP9)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP10)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_UDA_UOA_delivery(data = UDA_scheduled_data,  UDAorUOA = "UDA",
                                  level = "STP",
                                  region_STP_name = STP11)
```

* This graph shows the monthly percentage of usual annual contracted UDAs scaled up to 12 months (18 months for April) submitted. The graph uses scheduled data to measure the
activity which is fixed. This may be thought of as "UDAs submitted" in each month rather than delivered.


]
]

[Return to contents](#contents)

---

name: uda-delivery-profile

### UDA delivery profile

```{r xaringan-panelset-UDA_delivery_profile, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "Regional",
                          region_STP_name = region)
```


* The number of contracts delivering above 95% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "Regional", region_STP_name = region, get_num_above = 0.95)[1]`**
(
**`r round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "Regional", region_STP_name = region, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "Regional", region_STP_name = region))`**
% of contracts),
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "Regional", region_STP_name = region, get_num_above = 0.95)[2]`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "Regional", region_STP_name = region, get_num_above = 1)[1]`**,
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "Regional", region_STP_name = region, get_num_above = 1)[2]`**
UDAs.


 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP1)
```



* The number of contracts delivering above 95% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP1, get_num_above = 0.95)[1]`**
(
**`r round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP1, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP1))`**
% of contracts),
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP1, get_num_above = 0.95)[2]`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP1, get_num_above = 1)[1]`**,
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP1, get_num_above = 1)[2]`**
UDAs.



 ]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP2)
```



* The number of contracts delivering above 95% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP2, get_num_above = 0.95)[1]`**
(
**`r round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP2, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP2))`**
% of contracts),
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP2, get_num_above = 0.95)[2]`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP2, get_num_above = 1)[1]`**,
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP2, get_num_above = 1)[2]`**
UDAs.


 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP3)
```


* The number of contracts delivering above 95% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP3, get_num_above = 0.95)[1]`**
(
**`r round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP3, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP3))`**
% of contracts),
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP3, get_num_above = 0.95)[2]`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP3, get_num_above = 1)[1]`**,
with a mean contract size of
**`r plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP3, get_num_above = 1)[2]`**
UDAs.


 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP4)
```

 
* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval4){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP4, get_num_above = 0.95)[1]}`**
(
**`r if(eval4){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP4, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP4))}`**
% of contracts),
with a mean contract size of
**`r if(eval4){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP4, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval4){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP4, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval4){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP4, get_num_above = 1)[2]}`**
UDAs.



 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP5)
```


* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval5){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP5, get_num_above = 0.95)[1]}`**
(
**`r if(eval5){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP5, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP5))}`**
% of contracts),
with a mean contract size of
**`r if(eval5){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP5, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval5){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP5, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval5){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP5, get_num_above = 1)[2]}`**
UDAs.


 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP6)
```


 
* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval6){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP6, get_num_above = 0.95)[1]}`**
(
**`r if(eval6){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP6, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP6))}`**
% of contracts),
with a mean contract size of
**`r if(eval6){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP6, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval6){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP6, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval6){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP6, get_num_above = 1)[2]}`**
UDAs.


 
 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP7)
```




* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval7){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP7, get_num_above = 0.95)[1]}`**
(
**`r if(eval7){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP7, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP7))}`**
% of contracts),
with a mean contract size of
**`r if(eval7){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP7, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval7){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP7, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval7){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP7, get_num_above = 1)[2]}`**
UDAs.


 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP8)
```


* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval8){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP8, get_num_above = 0.95)[1]}`**
(
**`r if(eval8){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP8, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP8))}`**
% of contracts),
with a mean contract size of
**`r if(eval8){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP8, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval8){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP8, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval8){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP8, get_num_above = 1)[2]}`**
UDAs.



 ]
  .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP9)
```

 
* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval9){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP9, get_num_above = 0.95)[1]}`**
(
**`r if(eval9){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP9, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP9))}`**
% of contracts),
with a mean contract size of
**`r if(eval9){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP9, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval9){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP9, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval9){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP9, get_num_above = 1)[2]}`**
UDAs.



 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP10)
```


* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval10){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP10, get_num_above = 0.95)[1]}`**
(
**`r if(eval10){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP10, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP10))}`**
% of contracts),
with a mean contract size of
**`r if(eval10){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP10, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval10){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP10, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval10){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP10, get_num_above = 1)[2]}`**
UDAs.



 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_UDA_UOA_delivery_profile(data = UDA_scheduled_data,
                          
                          UDAorUOA = "UDA",
                          include_historic = FALSE,
                          level = "STP",
                          region_STP_name = STP11)
```


 
* The number of contracts delivering above 95% contracted value for this month is
**`r if(eval11){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP11, get_num_above = 0.95)[1]}`**
(
**`r if(eval11){round(as.numeric(plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP11, get_num_above = 0.95)[1]) *100 / get_num_contracts(level = "STP", region_STP_name = STP11))}`**
% of contracts),
with a mean contract size of
**`r if(eval11){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP11, get_num_above = 0.95)[2]}`**
UDAs.
* The number of contracts delivering above 100% contracted value for this month is
**`r if(eval11){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP11, get_num_above = 1)[1]}`**,
with a mean contract size of
**`r if(eval11){plot_delivery_vs_contract_size_scatter_corporate(level = "STP", region_STP_name = STP11, get_num_above = 1)[2]}`**
UDAs.
 ]
 ]
 
This graph shows the proportion of practices delivering
between a certain % group of contracted UDA activity if performance for that
month is annualised. Improvement would be seen as the distribution moving towards the right, as more contracts deliver closer to 100% of their contracted UDAs.

[Return to contents](#contents)

---

name: uoa-activity

### UOA activity data


```{r xaringan-panelset-UOA_activity, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "Regional",
                                  region_STP_name = region)
```

* This graph shows the average monthly performance of the
**`r get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "Regional", region_STP_name = region)`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).

 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP1)
```

* This graph shows the average monthly performance of the
**`r get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP1)`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP2)
```

* This graph shows the average monthly performance of the
**`r get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP2)`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP3)
```

* This graph shows the average monthly performance of the
**`r get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP3)`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP4)
```

* This graph shows the average monthly performance of the
**`r if(eval4){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP4)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP5)
```

* This graph shows the average monthly performance of the
**`r if(eval5){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP5)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP6)
```

* This graph shows the average monthly performance of the
**`r if(eval6){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP6)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP7)
```

* This graph shows the average monthly performance of the
**`r if(eval7){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP7)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP8)
```

* This graph shows the average monthly performance of the
**`r if(eval8){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP8)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP9)
```

* This graph shows the average monthly performance of the
**`r if(eval9){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP9)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).


]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP10)
```

* This graph shows the average monthly performance of the
**`r if(eval10){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP10)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).

]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  historic_data = historical_UDA_scheduled_data,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  include_historic = FALSE,
                                  level = "STP",
                                  region_STP_name = STP11)
```

* This graph shows the average monthly performance of the
**`r if(eval11){get_num_contracts(data = UOA_scheduled_data, remove_prototypes = T,  UDAorUOA = "UOA", level = "STP", region_STP_name = STP11)}`**
GDS/PDS contracts scaled up by 12 months measured against the delivery thresholds (80% for Apr-Sep 21, 85% for Oct-Dec, 90% for Jan-Mar, 100% for Apr-Jun 22).

]
]

 [Return to contents](#contents)


---

name: uoa-activity-my-cat

### UOA activity data by MY Category
#### Prototypes and contracts with annual contracted UDAs < 100 included

```{r xaringan-panelset-UOA_MY_CAT, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "Regional",
                                  region_STP_name = region)
```


 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP2)
```

 ]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP3)
```

 ]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP4)
```

 ]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP5)
```

 ]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP6)
```

 ]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP7)
```

 ]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP8)
```

 ]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP9)
```

 ]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP10)
```

 ]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = FALSE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP11)
```

 ]
]

[Return to contents](#contents)

---

### UOA activity data by MY Category
#### Prototypes and contracts with annual contracted UDAs < 100 excluded

```{r xaringan-panelset-UOA_MY_CAT2, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "Regional",
                             region_STP_name = region)
```

 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP2)
```

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP3)
```

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP4)
```

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP5)
```

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP6)
```

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP7)
```

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP8)
```

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP9)
```

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP10)
```

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_UDA_UOA_delivery_MY_cat(
                             data = UOA_scheduled_data,
                                  contractor_cats = contractor_categories,
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE,
                                  regional_lines = FALSE,
                                  STP_lines = FALSE,
                                  cat_lines = TRUE,
                                  plotChart = TRUE,
                                  level = "STP",
                                  region_STP_name = STP11)
```

 ]
 ]

 [Return to contents](#contents)

---

name: cumulative-uoas

### UOA cumulative activity data

```{r xaringan-panelset-UOA_cumulative, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "Regional",
                                  region_STP_name = region)
```

* This graph shows the cumulative activity by quarter of the **`r get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "Regional", region_STP_name = region)`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "Regional", region_STP_name = region)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "Regional", region_STP_name = region)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "Regional", region_STP_name = region))` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.

 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP1)
```

* This graph shows the cumulative activity by quarter of the **`r get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP1)`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP1)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP1)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP1))` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP2)
```

* This graph shows the cumulative activity by quarter of the **`r get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP2)`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP2)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP2)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP2))` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP3)
```

* This graph shows the cumulative activity by quarter of the **`r get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP3)`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP3)`**
contracts (
**`r round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP3)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP3))` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP4)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval4){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP4)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval4){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP4)}`**
contracts (
**`r if(eval4){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP4)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP4))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP5)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval5){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP5)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval5){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP5)}`**
contracts (
**`r if(eval5){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP5)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP5))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP6)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval6){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP6)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval6){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP6)}`**
contracts (
**`r if(eval6){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP6)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP6))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP7)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval7){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP7)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval7){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP7)}`**
contracts (
**`r if(eval7){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP7)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP7))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP8)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval8){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP8)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval8){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP8)}`**
contracts (
**`r if(eval8){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP8)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP8))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP9)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval9){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP9)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval9){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP9)}`**
contracts (
**`r if(eval9){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP9)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP9))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP10)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval10){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP10)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval10){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP10)}`**
contracts (
**`r if(eval10){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP10)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP10))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_cumulative_UDA_UOA_to_target(data = UOA_scheduled_data, 
                                              
                                              UDAorUOA = "UOA", 
                                              plotChart = TRUE,
                                              all_regions_and_STPs = FALSE,
                                              remove_prototypes = TRUE,
                                  level = "STP",
                                  region_STP_name = STP11)
```

* This graph shows the cumulative activity by quarter of the **`r if(eval11){get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP11)}`**
GDS/PDS contracts measured against the
expected monthly total activity to achieve the quarterly thresholds (100% for Apr-Jun 22).
* From the start of April to the end of `r format(Sys.Date() - lubridate::weeks(4), "%B")`
**`r if(eval11){get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP11)}`**
contracts (
**`r if(eval11){round(get_quarterly_num_contracts_on_target(UOA_scheduled_data, UDAorUOA = "UOA", level = "STP", region_STP_name = STP11)*100/get_num_contracts(UOA_scheduled_data, remove_prototypes = T, "UOA", level = "STP", region_STP_name = STP11))}` %**
) have delivered the required UOAs or more to be on track towards the Q4 threshold (100%) by the end of March 2023.


 ]
 ]

 [Return to contents](#contents)
 
---

name: YTD-uoas

### YTD UOA delivery

```{r xaringan-panelset-UOA-activity_YTD, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="2">
.panelset[

.panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  level = "Regional",
                                  region_STP_name = region,
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE)
```


]
.panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP1)
```


]
.panel[.panel-name[`r STP2``]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP2)
```


]
.panel[.panel-name[`r STP3`]
```{r  echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center'}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP3)
```


]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval4}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP4)
```


]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval5}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP5)
```


]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval6}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP6)
```


]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval7}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP7)
```


]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval8}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP8)
```


]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval9}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP9)
```


]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval10}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP10)
```


]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, fig.align='center', eval=eval11}
plot_YTD_UDA_UOA_delivery(data = UOA_scheduled_data, 
                                  
                                  UDAorUOA = "UOA",
                                  remove_prototypes = TRUE, 
                                  plotChart = TRUE, 
                                  all_regions_and_STPs = FALSE,
                                  level = "STP",
                                  region_STP_name = STP11)
```


]
]

[Return to contents](#contents)



---

name: uoa-delivery-profile

### UOA delivery profile

```{r xaringan-panelset-UOA_delivery_profile, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "Regional",
                          region_STP_name = region)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.

 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP1)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP2)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP3)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP4)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP5)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP6)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP7)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP8)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP9)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP10)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
.panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_UDA_UOA_delivery_profile(data = UOA_scheduled_data,
                          
                          UDAorUOA = "UOA",
                          level = "STP",
                          region_STP_name = STP11)
```

* The graph shows the proportion of practices delivering
between a certain % group of contracted UOA activity if performance for that
month is annualised.
This uses scheduled data.


 ]
 ]

[Return to contents](#contents)

---

name: banded-cots

### Time series of banded Courses of Treatment

```{r xaringan-panelset-CoTs, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "Regional",
                region_STP_name = region)
```


 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                level = "STP",
                region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP2)
```

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                level = "STP",
                region_STP_name = STP3)
```

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval4}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP4)
```

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP5)
```

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval6}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP6)
```

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval7}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP7)
```

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval8}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP8)
```

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval9}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP9)
```

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval10}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP10)
```

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval11}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP11)
```

 ]
 ]

[Return to contents](#contents)

---

name: banded-cots-index

### Banded Courses of Treatment as % of April 2019 delivery

```{r xaringan-panelset-CoTs2, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "Regional",
                region_STP_name = region,
                asIndex = TRUE)
```


 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP1,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP2,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP3,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval4}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP4,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval5}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP5,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval6}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP6,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval7}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP7,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval8}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP8,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval9}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP9,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval10}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP10,
                asIndex = TRUE)
```

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval11}
plot_banded_CoT(data = UDA_scheduled_data,
                
                historic_data = historical_UDA_scheduled_data,
                remove_prototypes = FALSE,
                level = "STP",
                region_STP_name = STP11,
                asIndex = TRUE)
```

 ]
 ]

[Return to contents](#contents)

---

name: band2-split-FP17-perc

### Percentage of FP17s in each band 2 sub-category

```{r xaringan-panelset-band2-split-fp17-perc, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "Regional",
                region_STP_name = region)
```


 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP2)
```

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP3)
```

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval4}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP4)
```

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval5}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP5)
```

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval6}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP6)
```

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval7}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP7)
```

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval8}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP8)
```

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval9}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP9)
```

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval10}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP10)
```

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval11}
plot_band2_split_percentage(data = band2_split_data,
                             scheduled_data = UDA_scheduled_data,
                             remove_prototypes = FALSE, 
                             commissioner_region_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP11)
```

 ]
 ]

[Return to contents](#contents)


---

name: dcp-fp17

### Percentage of CoTs assisted by Dental Care Practitioners (DCPs)

```{r xaringan-panelset-dcp-fp17, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "Regional",
                region_STP_name = region)
```


 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP2)
```

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP3)
```

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval4}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP4)
```

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP5)
```

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval6}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP6)
```

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval7}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP7)
```

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval8}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP8)
```

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval9}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP9)
```

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval10}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP10)
```

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval11}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "FP17",
                level = "STP",
                region_STP_name = STP11)
```

 ]
 ]
 N.B. This data has only been collected since October 2022 and may take a few months for contractors to get used to reporting on DCP assisted courses of treatment. 

[Return to contents](#contents)

---

name: dcp-uda

### Percentage of UDAs assisted by Dental Care Practitioners (DCPs)

```{r xaringan-panelset-dcp-uda, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "Regional",
                region_STP_name = region)
```


 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP2)
```

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP3)
```

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval4}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP4)
```

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval5}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP5)
```

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval6}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP6)
```

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval7}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP7)
```

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval8}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP8)
```

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval9}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP9)
```

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval10}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP10)
```

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval11}
plot_DCP_analysis(data = UDA_scheduled_data,
                              dcp_data = DCP_data,
                              UDA_or_FP17 = "UDA",
                level = "STP",
                region_STP_name = STP11)
```

 ]
 ]
 N.B. This data has only been collected since October 2022 and may take a few months for contractors to get used to reporting on DCP assisted courses of treatment. 

[Return to contents](#contents)

---

name: bpe

### Oral health risk assessment

```{r xaringan-panelset-bpe, echo=FALSE}
xaringanExtra::use_panelset()
```

 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                                         level = "Regional",
                                         region_STP_name = region)
```

The boxplot for **`r format(plot_BPE_no_oral_health_risk(level = "Regional", region_STP_name = region, plotChart = FALSE, quartileOutput = NULL), "%B %Y")`** shows that: 
* A quarter of contracts brought back **`r paste(plot_BPE_no_oral_health_risk(level = "Regional", region_STP_name = region, plotChart = FALSE, quartileOutput = "UQ"))`** of their low risk patients within one year
* Half of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "Regional", region_STP_name = region, plotChart = FALSE, quartileOutput = "Median"))`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "Regional", region_STP_name = region, plotChart = FALSE, quartileOutput = "LQ"))`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP1)
```

The boxplot for **`r format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP1, plotChart = FALSE, quartileOutput = NULL), "%B %Y")`** shows that: 
* A quarter of contracts brought back **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP1, plotChart = FALSE, quartileOutput = "UQ"))`** of their low risk patients within one year
* Half of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP1, plotChart = FALSE, quartileOutput = "Median"))`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP1, plotChart = FALSE, quartileOutput = "LQ"))`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP2)
```

The boxplot for **`r format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP2, plotChart = FALSE, quartileOutput = NULL), "%B %Y")`** shows that: 
* A quarter of contracts brought back **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP2, plotChart = FALSE, quartileOutput = "UQ"))`** of their low risk patients within one year
* Half of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP2, plotChart = FALSE, quartileOutput = "Median"))`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP2, plotChart = FALSE, quartileOutput = "LQ"))`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP3)
```

The boxplot for **`r format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP3, plotChart = FALSE, quartileOutput = NULL), "%B %Y")`** shows that: 
* A quarter of contracts brought back **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP3, plotChart = FALSE, quartileOutput = "UQ"))`** of their low risk patients within one year
* Half of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP3, plotChart = FALSE, quartileOutput = "Median"))`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP3, plotChart = FALSE, quartileOutput = "LQ"))`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval4}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP4)
```

The boxplot for **`r if(eval4){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP4, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval4){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP4, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval4){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP4, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval4){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP4, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval5}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP5)
```

The boxplot for **`r if(eval5){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP5, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval5){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP5, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval5){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP5, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval5){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP5, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval6}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP6)
```

The boxplot for **`r if(eval6){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP6, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval6){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP6, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval6){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP6, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval6){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP6, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval7}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP7)
```

The boxplot for **`r if(eval7){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP7, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval7){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP7, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval7){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP7, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval7){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP7, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval8}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP8)
```

The boxplot for **`r if(eval8){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP8, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval8){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP8, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval8){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP8, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval8){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP8, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval9}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP9)
```

The boxplot for **`r if(eval9){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP9, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval9){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP9, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval9){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP9, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval9){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP9, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval10}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP10)
```

The boxplot for **`r if(eval10){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP10, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval10){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP10, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval10){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP10, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval10){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP10, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, , fig.width=14, fig.height=5, eval = eval11}
plot_BPE_no_oral_health_risk(data = BPE_data,
                                         ICB_lookup = STP_ICB_lookup_codes,
                level = "STP",
                region_STP_name = STP11)
```

The boxplot for **`r if(eval11){format(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP11, plotChart = FALSE, quartileOutput = NULL), "%B %Y")}`** shows that: 
* A quarter of contracts brought back **`r if(eval11){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP11, plotChart = FALSE, quartileOutput = "UQ"))}`** of their low risk patients within one year
* Half of contracts brought back at least **`r if(eval11){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP11, plotChart = FALSE, quartileOutput = "Median"))}`** of their low risk patients within one year
* Three quarters of contracts brought back at least **`r if(eval11){paste(plot_BPE_no_oral_health_risk(level = "STP", region_STP_name = STP11, plotChart = FALSE, quartileOutput = "LQ"))}`** of their low risk patients within one year

 ]
 ]
Low risk is defined as having BPE (Basic Periodontal Examination) Score of 0 or 1 and no new tooth decay. 

[Return to contents](#contents)

---

name: unique-patients

### Unique dental patients seen

```{r xaringan-panelset-Unique-patients, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "Regional",
                                     region_STP_name = region,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "Regional",region_STP_name = region, plotChart = F,remove_prototypes = FALSE, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP1,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "STP",region_STP_name = STP1, plotChart = F, remove_prototypes = FALSE, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP2,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "STP",region_STP_name = STP2, plotChart = F, remove_prototypes = T, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP3,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "STP",region_STP_name = STP3, plotChart = F, remove_prototypes = FALSE, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP4,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval4){plot_unique_patients_rolling(level = "STP",region_STP_name = STP4, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP5,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval5){plot_unique_patients_rolling(level = "STP",region_STP_name = STP5, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP6,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval6){plot_unique_patients_rolling(level = "STP",region_STP_name = STP6, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP7,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval7){plot_unique_patients_rolling(level = "STP",region_STP_name = STP7, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP8,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval8){plot_unique_patients_rolling(level = "STP",region_STP_name = STP8, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP9,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval9){plot_unique_patients_rolling(level = "STP",region_STP_name = STP9, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP10,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval10){plot_unique_patients_rolling(level = "STP",region_STP_name = STP10, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP11,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval11){plot_unique_patients_rolling(level = "STP",region_STP_name = STP11, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 ]

N.B. This analysis now includes all contracts.

[Return to contents](#contents)


---

name: unique-patients-index

### Unique dental patients seen as a percentage of April 2018 figures

```{r xaringan-panelset-Unique-patients2, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "Regional",
                                     region_STP_name = region,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "Regional",region_STP_name = region, plotChart = F, remove_prototypes = FALSE, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP1`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP1,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "STP",region_STP_name = STP1, plotChart = F, remove_prototypes = FALSE, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP2`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP2,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "STP",region_STP_name = STP2, plotChart = F, remove_prototypes = FALSE, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP3`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP3,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r plot_unique_patients_rolling(level = "STP",region_STP_name = STP3, plotChart = F, remove_prototypes = FALSE, get_perc = T)` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP4`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP4,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval4){plot_unique_patients_rolling(level = "STP",region_STP_name = STP4, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP5`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP5,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval5){plot_unique_patients_rolling(level = "STP",region_STP_name = STP5, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP6`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP6,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval6){plot_unique_patients_rolling(level = "STP",region_STP_name = STP6, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP7`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP7,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval7){plot_unique_patients_rolling(level = "STP",region_STP_name = STP7, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP8`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP8,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval8){plot_unique_patients_rolling(level = "STP",region_STP_name = STP8, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP9`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP9,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval9){plot_unique_patients_rolling(level = "STP",region_STP_name = STP9, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP10`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP10,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval10){plot_unique_patients_rolling(level = "STP",region_STP_name = STP10, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 .panel[.panel-name[`r STP11`]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_unique_patients_rolling(data = unique_patients_rolling,
                                     
                                     scheduled_data = UDA_scheduled_data,
                                     level = "STP",
                                     region_STP_name = STP11,
                                     plotChart = TRUE,
                                     remove_prototypes = FALSE,
                             asIndex = TRUE)
```

* The number of unique patients seen in the last 12 months is currently around
**`r if(eval11){plot_unique_patients_rolling(level = "STP",region_STP_name = STP11, plotChart = F, remove_prototypes = FALSE, get_perc = T)}` %**
of pre-pandemic levels.

 ]
 ]

[Return to contents](#contents)

---

name: new-patients

### Number of new patients seen

```{r xaringan-panelset-new-patients, echo=FALSE}
xaringanExtra::use_panelset()
```

 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "Regional",
                                                     region_STP_name = region)
```

 ]
 .panel[.panel-name[`r STP1`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP2
                                                     )
```

 ]
 .panel[.panel-name[`r STP3`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP3
                                                     )
```

 ]
 .panel[.panel-name[`r STP4`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP4
                                                     )
```

 ]
 .panel[.panel-name[`r STP5`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP5
                                                     )
```

 ]
 .panel[.panel-name[`r STP6`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP6
                                                     )
```

 ]
 .panel[.panel-name[`r STP7`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP7
                                                     )
```

 ]
 .panel[.panel-name[`r STP8`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP8
                                                     )
```

 ]
 .panel[.panel-name[`r STP9`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP9
                                                     )
```

 ]
 .panel[.panel-name[`r STP10`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP10
                                                     )
```

 ]
 .panel[.panel-name[`r STP11`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = FALSE,
                                                     level = "STP",
                                                     region_STP_name = STP11
                                                     )
```

 ]
 ]

[Return to contents](#contents)

---

name: new-patients-perc

### Percentage of providers seeing new patients

```{r xaringan-panelset-new-patientspoerc, echo=FALSE}
xaringanExtra::use_panelset()
```

 <font size="1">
.panelset[

 .panel[.panel-name[`r region`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "Regional",
                                                     region_STP_name = region)
```

 ]
 .panel[.panel-name[`r STP1`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP1)
```

 ]
 .panel[.panel-name[`r STP2`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP2
                                                     )
```

 ]
 .panel[.panel-name[`r STP3`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP3
                                                     )
```

 ]
 .panel[.panel-name[`r STP4`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP4
                                                     )
```

 ]
 .panel[.panel-name[`r STP5`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP5
                                                     )
```

 ]
 .panel[.panel-name[`r STP6`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP6
                                                     )
```

 ]
 .panel[.panel-name[`r STP7`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP7
                                                     )
```

 ]
 .panel[.panel-name[`r STP8`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP8
                                                     )
```

 ]
 .panel[.panel-name[`r STP9`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP9
                                                     )
```

 ]
 .panel[.panel-name[`r STP10`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP10
                                                     )
```

 ]
 .panel[.panel-name[`r STP11`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_number_new_patients(data = new_vs_return_data, 
                                                  scheduled_data = UDA_scheduled_data,
                                                  as_percentage = TRUE,
                                                     level = "STP",
                                                     region_STP_name = STP11
                                                     )
```

 ]
 ]

[Return to contents](#contents)

---

name: reattendance

### Patient re-attendance intervals

```{r xaringan-panelset-reattendance, echo=FALSE}
xaringanExtra::use_panelset()
```
 <font size="2">
.panelset[

 .panel[.panel-name[Band 1]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=12, fig.height=6}
plot_patient_recalls_facet(data = dental_recalls_STP_2018_22,
                                 treatment_band = "Band_1",
                                 level = "Regional",
                                 region_STP_name = region,
                                 
                                 plotChart = TRUE)
```

 ]
 .panel[.panel-name[Band 2]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=12, fig.height=6}
plot_patient_recalls_facet(data = dental_recalls_STP_2018_22,
                                 treatment_band = "Band_2",
                                 level = "Regional",
                                 region_STP_name = region,
                                 
                                 plotChart = TRUE)
```

 ]
 .panel[.panel-name[Band 3]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=12, fig.height=6}
plot_patient_recalls_facet(data = dental_recalls_STP_2018_22,
                                 treatment_band = "Band_3",
                                 level = "Regional",
                                 region_STP_name = region,
                                 
                                 plotChart = TRUE)
```

 ]
 .panel[.panel-name[Urgent]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=12, fig.height=6}
plot_patient_recalls_facet(data = dental_recalls_STP_2018_22,
                                 treatment_band = "Urgent",
                                 level = "Regional",
                                 region_STP_name = region,
                                 
                                 plotChart = TRUE)
```

 ]
  .panel[.panel-name[Other]
```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=12, fig.height=6}
plot_patient_recalls_facet(data = dental_recalls_STP_2018_22,
                                 treatment_band = "Other",
                                 level = "Regional",
                                 region_STP_name = region,
                                 
                                 plotChart = TRUE)
```

 ]
 ]

[Return to contents](#contents)

---

```{r include=FALSE}

out = NULL

for (i in 1:length(STPs)) {
  value.to.match <- STPs[i]
  out = c(out, knitr::knit_expand('ICB_loop.Rmd'))
  print(i)
  }

```

`r paste(knitr::knit(text = out), collapse = '\n')`




name: uda-value

### Cumulative financial value of UDAs delivered

```{r xaringan-panelset-uda-value, echo=FALSE}
xaringanExtra::use_panelset()
```

 <font size="2">
.panelset[
.panel[.panel-name[`r region`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                           plotChart = TRUE,
                           level = "Regional",
                           region_STP_name = region)
```

]
 .panel[.panel-name[`r STP1`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP1,
                                plotChart = TRUE)
```

 ]
  .panel[.panel-name[`r STP2`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP2,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP3`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP3,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP4`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP4,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP5`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP5,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP6`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP6,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP7`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP7,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP8`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP8,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP9`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP9,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP10`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP10,
                                plotChart = TRUE)
```

 ]
 .panel[.panel-name[`r STP11`]

```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11}
plot_cumulative_UDA_value(data = UDA_scheduled_data,
                           historical_data = historical_UDA_scheduled_data,
                           payments_data = payments_to_dentists,
                           UDA_value_data = UDA_UOA_value_data,
                           protos = prototype_contracts$prototype_contract_number,
                           all_regions_and_STPs = FALSE,
                           asIndex = FALSE,
                                level = "STP",
                                region_STP_name = STP11,
                                plotChart = TRUE)
```

 ]
 ]

[Return to contents](#contents)

---
name: my-cat-breakdown

### Appendix
#### MY Category classification breakdown:

 <font size="1">

* Cat 1
  + Details in CoMPASS Correct
* Cat 2
  + Carry Forward - Other
  + Flexibly Commissioned Contract
  + Force majeure accepted
  + Force majeure o/s
  + In-year incorporation/merge (Parent contract - letter will be sent)
  + Incomplete OOH/other access services
  + Late subs processed
  + Mixed / CoT Contract
  + Non-recurring activity
  + Open in-year
  + Other
  + Request to re-base
  + Review Carry Forward
  + Sub Contracts (Parent contract - letter will be sent)
  + UDA Value below £15.00
  + UDA Value exceeds £49.99
  + UDC
  + UOA Value exceeds £75.00
  + Closed in-year
  + Incomplete service line entries

---

 <font size="1">

* Cat 3
  + CDS
  + Closed in year
  + Contract End Date before 01/04/2020
  + Contract End Date before 01/04/2021
  + Contract End Date before 01/04/2022
  + DCO req to resolve locally
  + Domiciliary/ Sedation
  + IMOS/MOS
  + In-year incorporation/merge (Child contract - letter will not be sent)
  + Incomplete OOH/other access services
  + Known performance/contract issues
  + No Contracted activity
  + No Contracted value
  + Not paid by the NHSBSA
  + Open in year
  + Other
  + Other - Please state why
  + Other Advanced/Additional Services
  + PDS Plus
  + Prison
  + Sub Contracts (Child contract - letter will not be sent)
* Cat 4
  + Dental Contract Reform

---

name: data-sources

#### Data sources

 <font size="1">
* BSA calendar and scheduled UDA data downloaded from the "NHS England Central Dashboard" on eDEN. This data is downloaded monthly and put on the NCDR.
* Tables are:
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[UDA_calendar]
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[UDA_scheduled]
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[UOA_calendar]
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[UOA_scheduled]
* A list of prototype contracts are also available in:
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[prototype_contracts]
* Tables of UDA delivery on STP level in calendar and scheduled format available in:
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[UDA_delivery_calendar]
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[UDA_delivery_scheduled]

* 111 data comes from the pathways tool which is received monthly by email.
* Rolling unique patients data is received monthly by email from the BSA and saved on the NCDR in the following table:
  + [NHSE_Sandbox_PrimaryCareNHSContracts].[Dental].[unique_patients_rolling_12_month]
* CDS data is downloaded from the [CDS dashboard](#https://miteam.shinyapps.io/CDS_Dashboard/)




<!--  ```{r xaringan-panelset-UDA-activity, echo=FALSE} -->
<!--  xaringanExtra::use_panelset() -->
<!--  ``` -->
<!--   <font size="1"> -->
<!--  .panelset[ -->

<!--  .panel[.panel-name[National] -->


<!--  ] -->
<!--  .panel[.panel-name[South East] -->



<!--  ] -->
<!--  .panel[.panel-name[South West] -->



<!--  ] -->
<!--  .panel[.panel-name[North West] -->



<!--  ] -->
<!--  .panel[.panel-name[North East and Yorkshire] -->



<!--  ] -->
<!-- .panel[.panel-name[London] -->


<!--  ] -->
<!--  .panel[.panel-name[Midlands] -->



<!--  ] -->
<!--  .panel[.panel-name[East of England] -->



<!--  ] -->
<!--  ] -->


<!-- --- -->


<!-- --- -->

<!-- name: cds -->

<!-- ### Community Dental Services (CDS) - Patients waiting for assessment -->

<!-- ```{r xaringan-panelset-CDS1, echo=FALSE} -->
<!-- xaringanExtra::use_panelset() -->
<!-- ``` -->
<!--  <font size="1"> -->
<!-- .panelset[ -->

<!--  .panel[.panel-name[`r region`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "Regional", -->
<!--                                                      region_STP_name = region, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP1`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP1, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP2`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP2, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP3`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP3, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP4`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP4, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP5`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP5, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP6`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP6, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP7`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP7, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP8`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP8, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP9`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP9, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP10`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP10, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP11`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11} -->
<!-- plot_CDS_patients_waiting_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP11, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  ] -->

<!-- [Return to contents](#contents) -->

<!-- --- -->

<!-- name: cds-treatment -->

<!-- ### CDS - Patients waiting for treatment -->

<!-- ```{r xaringan-panelset-CDS2, echo=FALSE} -->
<!-- xaringanExtra::use_panelset() -->
<!-- ``` -->
<!--  <font size="1"> -->
<!-- .panelset[ -->

<!--  .panel[.panel-name[`r region`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "Regional", -->
<!--                                                      region_STP_name = region, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP1`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP1, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP2`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP2, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP3`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP3, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP4`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP4, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP5`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP5, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP6`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP6, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP7`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP7, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP8`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP8, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP9`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP9, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP10`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP10, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP11`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11} -->
<!-- plot_CDS_patients_waiting_for_treatment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP11, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  ] -->

<!-- [Return to contents](#contents) -->

<!-- --- -->

<!-- name: cds-wait-weeks-assessment -->

<!-- ### CDS - Wait times for assessment -->

<!-- ```{r xaringan-panelset-CDS3, echo=FALSE} -->
<!-- xaringanExtra::use_panelset() -->
<!-- ``` -->

<!--  <font size="1"> -->
<!-- .panelset[ -->

<!--  .panel[.panel-name[`r region`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "Regional", -->
<!--                                                      region_STP_name = region, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP1`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP1, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP2`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP2, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP3`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP3, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP4`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP4, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP5`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP5, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP6`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP6, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP7`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP7, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP8`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP8, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP9`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP9, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP10`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP10, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP11`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11} -->
<!-- plot_CDS_wait_times_for_assessment(data = CDS_data, -->
<!--                                                       -->
<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP11, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  ] -->

<!-- [Return to contents](#contents) -->

<!-- --- -->

<!-- name: cds-wait-weeks-treatment -->

<!-- ### CDS - Wait times for treatment -->

<!-- ```{r xaringan-panelset-CDS4, echo=FALSE} -->
<!-- xaringanExtra::use_panelset() -->
<!-- ``` -->

<!--  <font size="1"> -->
<!-- .panelset[ -->

<!--  .panel[.panel-name[`r region`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "Regional", -->
<!--                                                      region_STP_name = region, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP1`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP1, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP2`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP2, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP3`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP3, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP4`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval4} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP4, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP5`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval5} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP5, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP6`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval6} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP6, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP7`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval7} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP7, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP8`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval8} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP8, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP9`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval9} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP9, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP10`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval10} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP10, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  .panel[.panel-name[`r STP11`] -->

<!-- ```{r echo = FALSE, warning = FALSE, message = FALSE, fig.width=14, fig.height=5, eval = eval11} -->
<!-- plot_CDS_wait_times_for_treatment(data = CDS_data, -->

<!--                                                      level = "STP", -->
<!--                                                      region_STP_name = STP11, -->
<!--                                                      all_regions_and_STPs = FALSE) -->
<!-- ``` -->

<!--  ] -->
<!--  ] -->

<!-- [Return to contents](#contents) -->





